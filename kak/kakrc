evaluate-commands %sh{
    config_files="
        common.kak
        plugins.kak
    "

    for file in $config_files; do
        printf "%s" "
            try %{
                source %{$kak_config/$file}
            } catch %{
                echo -debug %val{error}
            }
        "
    done
}

# Load local Kakoune config file if it exists
evaluate-commands %sh{ [ -f "$kak_config/local.kak" ] && echo "source '$kak_config/local.kak'" }
